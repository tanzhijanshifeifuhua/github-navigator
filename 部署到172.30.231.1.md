# ðŸš€ éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ 172.30.231.1

## ðŸ“‹ æœåŠ¡å™¨ä¿¡æ¯
- IP: 172.30.231.1
- ç±»åž‹: å†…ç½‘æœåŠ¡å™¨

---

## ðŸŽ¯ éƒ¨ç½²æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šè¿žæŽ¥åˆ°æœåŠ¡å™¨

åœ¨ä½ çš„ Windows ç”µè„‘ä¸Šæ‰“å¼€ PowerShell æˆ– CMDï¼š

```bash
ssh root@172.30.231.1
```

æˆ–ä½¿ç”¨ PuTTY/Xshell è¿žæŽ¥åˆ° 172.30.231.1

---

### ç¬¬ 2 æ­¥ï¼šé€‰æ‹©éƒ¨ç½²æ–¹å¼

#### æ–¹å¼ Aï¼šä¸€é”®è‡ªåŠ¨éƒ¨ç½²ï¼ˆæŽ¨èï¼‰â­

è¿žæŽ¥åˆ°æœåŠ¡å™¨åŽï¼Œè¿è¡Œï¼š

```bash
# ä¸‹è½½éƒ¨ç½²è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/tanzhijanshifeifuhua/github-navigator/main/scripts/auto_deploy.sh -o deploy.sh

# å¦‚æžœ curl ä¸å¯ç”¨ï¼Œä½¿ç”¨ wget
wget https://raw.githubusercontent.com/tanzhijanshifeifuhua/github-navigator/main/scripts/auto_deploy.sh -O deploy.sh

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x deploy.sh

# è¿è¡Œè„šæœ¬
sudo bash deploy.sh
```

æŒ‰æç¤ºé€‰æ‹©ï¼š
- è¾“å…¥ `1` é€‰æ‹© Docker éƒ¨ç½²ï¼ˆæŽ¨èï¼‰
- æˆ–è¾“å…¥ `2` é€‰æ‹©ä¼ ç»Ÿéƒ¨ç½²

ç­‰å¾… 3-5 åˆ†é’Ÿï¼Œå®Œæˆï¼

---

#### æ–¹å¼ Bï¼šæ‰‹åŠ¨ Docker éƒ¨ç½²

```bash
# 1. å®‰è£… Docker
curl -fsSL https://get.docker.com | sh
systemctl start docker
systemctl enable docker

# 2. å®‰è£… Docker Compose
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# 3. å…‹éš†é¡¹ç›®
cd /opt
git clone https://github.com/tanzhijanshifeifuhua/github-navigator.git
cd github-navigator

# 4. å¯åŠ¨æœåŠ¡
docker-compose -f config/docker-compose.yml up -d

# 5. æŸ¥çœ‹æ—¥å¿—
docker-compose -f config/docker-compose.yml logs -f
```

---

#### æ–¹å¼ Cï¼šæ‰‹åŠ¨ä¼ ç»Ÿéƒ¨ç½²

```bash
# 1. æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…ä¾èµ–
apt update && apt upgrade -y
apt install python3 python3-pip python3-venv nginx git -y

# 2. å…‹éš†é¡¹ç›®
mkdir -p /var/www
cd /var/www
git clone https://github.com/tanzhijanshifeifuhua/github-navigator.git
cd github-navigator

# 3. åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 4. é…ç½® Systemd æœåŠ¡
cp config/github-navigator.service /etc/systemd/system/
systemctl daemon-reload
systemctl start github-navigator
systemctl enable github-navigator

# 5. é…ç½® Nginx
cp config/nginx.conf /etc/nginx/sites-available/github-navigator

# ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„åŸŸåä¸º IP
sed -i 's/your-domain.com/172.30.231.1/g' /etc/nginx/sites-available/github-navigator

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/github-navigator /etc/nginx/sites-enabled/
nginx -t
systemctl restart nginx

# 6. é…ç½®é˜²ç«å¢™ï¼ˆå¦‚æžœæœ‰ï¼‰
ufw allow 80
ufw allow 443
ufw allow 5000
```

---

### ç¬¬ 3 æ­¥ï¼šè®¿é—®ç½‘ç«™

éƒ¨ç½²å®ŒæˆåŽï¼Œåœ¨æµè§ˆå™¨è®¿é—®ï¼š

**Docker éƒ¨ç½²ï¼š**
```
http://172.30.231.1:5000
```

**ä¼ ç»Ÿéƒ¨ç½²ï¼ˆé…ç½®äº† Nginxï¼‰ï¼š**
```
http://172.30.231.1
```

---

## ðŸ” éªŒè¯éƒ¨ç½²

### æ£€æŸ¥æœåŠ¡çŠ¶æ€

**Docker æ–¹å¼ï¼š**
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f /opt/github-navigator/config/docker-compose.yml logs -f

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:5000/health
```

**ä¼ ç»Ÿæ–¹å¼ï¼š**
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status github-navigator

# æŸ¥çœ‹æ—¥å¿—
journalctl -u github-navigator -f

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:5000/health
```

---

## ðŸ› ï¸ ç®¡ç†å‘½ä»¤

### Docker æ–¹å¼

```bash
# åœæ­¢æœåŠ¡
docker-compose -f /opt/github-navigator/config/docker-compose.yml down

# é‡å¯æœåŠ¡
docker-compose -f /opt/github-navigator/config/docker-compose.yml restart

# æ›´æ–°ä»£ç 
cd /opt/github-navigator
git pull
docker-compose -f config/docker-compose.yml up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f /opt/github-navigator/config/docker-compose.yml logs -f
```

### ä¼ ç»Ÿæ–¹å¼

```bash
# åœæ­¢æœåŠ¡
systemctl stop github-navigator

# é‡å¯æœåŠ¡
systemctl restart github-navigator

# æŸ¥çœ‹çŠ¶æ€
systemctl status github-navigator

# æŸ¥çœ‹æ—¥å¿—
journalctl -u github-navigator -f

# æ›´æ–°ä»£ç 
cd /var/www/github-navigator
git pull
source venv/bin/activate
pip install -r requirements.txt
systemctl restart github-navigator
```

---

## ðŸ”„ æ›´æ–°æ•°æ®

### æ‰‹åŠ¨æ›´æ–°

**Docker æ–¹å¼ï¼š**
```bash
# è¿›å…¥å®¹å™¨
docker exec -it github-navigator bash

# è¿è¡Œçˆ¬è™«
cd /app
python scripts/crawler.py
python scripts/add_chinese_descriptions.py

# é€€å‡ºå®¹å™¨
exit

# é‡å¯æœåŠ¡
docker-compose -f /opt/github-navigator/config/docker-compose.yml restart
```

**ä¼ ç»Ÿæ–¹å¼ï¼š**
```bash
cd /var/www/github-navigator
source venv/bin/activate
python scripts/crawler.py
python scripts/add_chinese_descriptions.py
systemctl restart github-navigator
```

### è‡ªåŠ¨æ›´æ–°ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰

```bash
# ç¼–è¾‘å®šæ—¶ä»»åŠ¡
crontab -e

# æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ›´æ–°ï¼‰
# Docker æ–¹å¼
0 2 * * * docker exec github-navigator python /app/scripts/crawler.py && docker exec github-navigator python /app/scripts/add_chinese_descriptions.py && docker-compose -f /opt/github-navigator/config/docker-compose.yml restart

# ä¼ ç»Ÿæ–¹å¼
0 2 * * * cd /var/www/github-navigator && source venv/bin/activate && python scripts/crawler.py && python scripts/add_chinese_descriptions.py && systemctl restart github-navigator
```

---

## â“ æ•…éšœæŽ’é™¤

### é—®é¢˜ 1ï¼šæ— æ³•è®¿é—®ç½‘ç«™

**æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œï¼š**
```bash
# Docker
docker ps

# ä¼ ç»Ÿ
systemctl status github-navigator
```

**æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬ï¼š**
```bash
netstat -tlnp | grep 5000
```

**æ£€æŸ¥é˜²ç«å¢™ï¼š**
```bash
# UFW
ufw status

# Firewalld
firewall-cmd --list-all
```

### é—®é¢˜ 2ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥

**æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š**
```bash
# Docker
docker-compose -f /opt/github-navigator/config/docker-compose.yml logs

# ä¼ ç»Ÿ
journalctl -u github-navigator -xe
```

**å¸¸è§åŽŸå› ï¼š**
- ç«¯å£è¢«å ç”¨
- Python ä¾èµ–æœªå®‰è£…
- æ–‡ä»¶æƒé™é—®é¢˜
- github_projects.json æ–‡ä»¶ç¼ºå¤±

### é—®é¢˜ 3ï¼šæ•°æ®æ˜¾ç¤ºä¸ºç©º

**æ£€æŸ¥æ•°æ®æ–‡ä»¶ï¼š**
```bash
# Docker
docker exec github-navigator ls -lh /app/github_projects.json

# ä¼ ç»Ÿ
ls -lh /var/www/github-navigator/github_projects.json
```

**å¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨æˆ–å¤ªå°ï¼Œé‡æ–°ç”Ÿæˆï¼š**
```bash
# Docker
docker exec -it github-navigator python /app/scripts/crawler.py
docker exec -it github-navigator python /app/scripts/add_chinese_descriptions.py

# ä¼ ç»Ÿ
cd /var/www/github-navigator
source venv/bin/activate
python scripts/crawler.py
python scripts/add_chinese_descriptions.py
```

---

## ðŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ä½¿ç”¨ Nginx ç¼“å­˜

ç¼–è¾‘ `/etc/nginx/sites-available/github-navigator`ï¼Œæ·»åŠ ï¼š

```nginx
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m max_size=1g inactive=60m;

location / {
    proxy_cache my_cache;
    proxy_cache_valid 200 60m;
    # ... å…¶ä»–é…ç½®
}
```

### 2. å¢žåŠ  Gunicorn å·¥ä½œè¿›ç¨‹

ç¼–è¾‘ `config/gunicorn_config.py`ï¼š

```python
workers = 4  # æ ¹æ® CPU æ ¸å¿ƒæ•°è°ƒæ•´
```

### 3. å¯ç”¨ Gzip åŽ‹ç¼©

åœ¨ Nginx é…ç½®ä¸­æ·»åŠ ï¼š

```nginx
gzip on;
gzip_types text/plain text/css application/json application/javascript;
```

---

## ðŸ”’ å®‰å…¨å»ºè®®

### 1. ä¿®æ”¹ SSH ç«¯å£

```bash
nano /etc/ssh/sshd_config
# ä¿®æ”¹ Port 22 ä¸ºå…¶ä»–ç«¯å£
systemctl restart sshd
```

### 2. é…ç½®é˜²ç«å¢™

```bash
ufw default deny incoming
ufw default allow outgoing
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable
```

### 3. å®šæœŸå¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /root/backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d)
tar -czf /root/backup-$DATE.tar.gz /var/www/github-navigator/github_projects.json
# ä¿ç•™æœ€è¿‘ 7 å¤©çš„å¤‡ä»½
find /root/backup-*.tar.gz -mtime +7 -delete
EOF

chmod +x /root/backup.sh

# æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡
crontab -e
# æ¯å¤©å‡Œæ™¨ 3 ç‚¹å¤‡ä»½
0 3 * * * /root/backup.sh
```

---

## ðŸ“ž éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ‰¾åˆ°é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æœåŠ¡çŠ¶æ€
3. ç¡®è®¤é˜²ç«å¢™å’Œç«¯å£é…ç½®
4. æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š`äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md`

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ðŸŽ‰
